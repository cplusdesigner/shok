
new foo = @(date d, int n)->(date & {hour:int, min:int, sec:int}) {
}


or type inference??
 -- fake type inference!  e.g.
new foo = @(date d, int n)->(new datetime) {
  new x = date & {hour:int, min:int, sec:int}
  if (runtime_check()) {
    new y = date & {h:int, min:int, lolz:double}
    return y
  }
  return x
}

This must give an error at the 'return x'.
